!function(){"use strict";var a=angular.module("plangular",[]),b="0d33361983f16d2527b01fbf6408b7d7";a.directive("plangular",function(a,c,d){var e=a[0].createElement("audio"),f={track:!1,playing:!1,paused:!1,tracks:null,i:null,play:function(a,c){null==c&&(a=new Array(a),c=0),f.tracks=a,f.track=a[c],f.i=c,f.paused!=f.track&&(e.src=f.track.stream_url+"?client_id="+b),e.play(),f.playing=f.track,f.paused=!1},pause:function(){e.pause(),f.playing&&(f.paused=f.playing,f.playing=!1)},playPlaylist:function(a){f.tracks==a.tracks&&f.paused?f.play(f.tracks,f.i):f.play(a.tracks,0)},next:function(a){a?a&&a.tracks==f.tracks&&(f.i+1<f.tracks.length?(f.i++,f.play(a.tracks,f.i)):f.pause()):f.i+1<f.tracks.length?(f.i++,f.play(f.tracks,f.i)):f.pause()},previous:function(a){a.tracks==f.tracks&&f.i>0&&(f.i=f.i-1,f.play(a.tracks,f.i))}};return e.addEventListener("ended",function(){c.$apply(function(){f.tracks.length>0?f.next():f.pause()})},!1),{restrict:"A",scope:!0,link:function(a,c,g){var h=g.plangular,i={url:h,client_id:b,callback:"JSON_CALLBACK"};d.jsonp("//api.soundcloud.com/resolve.json",{params:i}).success(function(b){b.tracks?a.playlist=b:"track"==b.kind?a.track=b:a.data=b}),a.player=f,a.audio=e,a.currentTime=0,a.duration=0,e.addEventListener("timeupdate",function(){(a.track==f.track||a.playlist&&a.playlist.tracks==f.tracks)&&a.$apply(function(){a.currentTime=(1e3*e.currentTime).toFixed(),a.duration=(1e3*e.duration).toFixed()})},!1),a.seekTo=function(a){var b=a.offsetX/a.target.offsetWidth;e.currentTime=b*e.duration}}}}),a.directive("plangularIcon",function(){var a={play:"M0 0 L32 16 L0 32 z",pause:"M0 0 H12 V32 H0 z M20 0 H32 V32 H20 z",previous:"M0 0 H4 V14 L32 0 V32 L4 18 V32 H0 z",next:"M0 0 L28 14 V0 H32 V32 H28 V18 L0 32 z",close:"M4 8 L8 4 L16 12 L24 4 L28 8 L20 16 L28 24 L24 28 L16 20 L8 28 L4 24 L12 16 z",chevronRight:"M12 1 L26 16 L12 31 L8 27 L18 16 L8 5 z",chevronLeft:"M20 1 L24 5 L14 16 L24 27 L20 31 L6 16 z",heart:"M0 10 C0 6, 3 2, 8 2 C12 2, 15 5, 16 6 C17 5, 20 2, 24 2 C30 2, 32 6, 32 10 C32 18, 18 29, 16 30 C14 29, 0 18, 0 10",download:"M10 0 H22 V10 H28 L16 24 L4 10 H10 z M0 26 H32 V32 H0",check:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"};return{restrict:"A",scope:!0,link:function(b,c,d){var e=c[0],f=d.plangularIcon,g=document.createElementNS("http://www.w3.org/2000/svg","svg"),h=document.createElementNS("http://www.w3.org/2000/svg","path");if(!a[f]){var i="";for(var j in a)i+=j+", ";return console.error("No icon found for "+f+".\n\nIcons available:\n"+i+"\n\nMore icons available from http://jxnblk.github.io/geomicons-open"),!1}e.className+=" plangular-icon plangular-icon-"+f,g.setAttribute("class",e.className);var k=e.getAttribute("viewBox")||"0 0 32 32";g.setAttribute("viewBox",k),h.setAttribute("d",a[f]),g.appendChild(h),e.parentNode.replaceChild(g,e)}}}),a.filter("playTime",function(){return function(a){var b=Math.floor(a/36e5),c="0"+Math.floor(a%36e5/6e4),d="0"+Math.floor(a%6e4/1e3);return c=c.substr(c.length-2),d=d.substr(d.length-2),isNaN(d)?"00:00":b?b+":"+c+":"+d:c+":"+d}})}();